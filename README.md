版权属于 原作者1830488003
https://github.com/1830488003/my-world-book-momo
个人仅为方便微调使用fork了一版，侵立删


# 我的世界书 (Momo) - My World Book (Momo)

**一个为 SillyTavern 设计的、功能强大且高度专业化的世界书（Lorebook）管理与AI辅助创作扩展。**

该项目旨在提供一套完整的世界观构建与管理工具集，从基础的条目编辑到复杂的AI辅助内容生成，帮助用户高效地创建、维护和使用结构化、逻辑自洽的世界设定。

## ✨ 核心功能

- **📚 完整的世界书管理**:
    - **创建、编辑、删除**: 提供对世界书（Lorebooks）及其条目（Entries）完整的生命周期管理。
    - **批量操作**: 支持在专门的界面中批量选择并删除世界书或特定条目。
    - **手动编辑**: 提供所见即所得的编辑器，方便对条目内容进行手动微调。

- **🤖 强大的AI辅助创作**:
    - **世界生成器 (World Generator)**: 用户只需提供一个核心概念，AI即可自动生成一套结构化、包含“索引蓝灯”和“细节绿灯”的层级式世界观条目。
    - **故事设计师 (Story Designer)**: 辅助用户快速生成可玩的、有主线的互动故事框架。
    - **AI辅助修改**: 对已有条目，可以请求AI进行润色、扩展或重构。

- **📈 深度统计与分析**:
    - **可视化数据面板**: 将选定世界书的各项数据（如Token数、条目数、类型分布）以图表和表格的形式清晰展示。
    - **内容分类分析**: 能够智能解析条目备注中的分类标签（如`【规则-系统】`），并按分类进行深度统计，帮助用户洞察世界观的结构和内容分布。

- **⚙️ 专业级条目工程**:
    - **蓝灯/绿灯系统**: 严格遵循SillyTavern的最佳实践，通过AI生成`constant`（蓝灯）和`Normal`（绿灯）条目，构建稳定、高效的触发结构。
    - **高级字段支持**: AI可自动配置`prevent_recursion`（防止递归）、`role`（角色）、`depth`（深度）等高级字段，实现系统消息注入等专业操作。
    - **关键词唯一性铁律**: AI被严格训练，以生成独特且精准的关键词，从根本上避免条目间的意外交叉触发。

- **🎨 高度统一的UI/UX**:
    - **风格统一**: 插件UI与`quest-system-extension`等现代扩展风格完全对齐，提供无缝、沉浸式的用户体验。
    - **移动端适配**: 所有界面均经过精心优化，确保在移动设备上也能完美显示和操作。
    - **逻辑化布局**: 功能分区清晰，将全局功能与需要预选世界书的编辑功能明确分开，操作流程符合直觉。

## 🚀 安装与使用

SillyTavern 支持直接通过链接安装扩展，这是最推荐的安装方式。

1.  打开 SillyTavern，点击右上角的 **扩展** 图标 (一个骰子 🎲 的形状)。
2.  在扩展页面中，点击 **安装扩展** (Install Extension) 按钮。
3.  在弹出的对话框中，将以下仓库链接粘贴到输入框内：
    ```
    https://github.com/1830488003/my-world-book-momo.git
    ```
4.  点击 `Install just for me` 或 `Install for all users` 进行安装。
5.  安装完成后，系统可能会提示您重新加载UI，请按提示操作。
6.  在扩展列表中找到并启用 "My World Book (Momo)"。
7.  点击顶部工具栏中的新图标即可打开插件界面。

## 📜 开发历程摘要

本项目经历了快速、密集的迭代开发，不断根据用户反馈进行重构和功能增强。关键里程碑包括：

- **v1.0 (初始版本)**: 实现了基础的世界书选择、条目查看和编辑功能。
- **v2.0 (AI集成)**: 引入了初版的“世界生成器”和“AI修改”功能，但存在数据格式和API使用问题。
- **v3.0 (专业化重构)**:
    - **提示词工程**: 彻底重构了AI提示词，引入了“蓝灯/绿灯”层级结构、高级字段支持和关键词唯一性原则，使AI生成的内容从“能用”变为“好用”。
    - **API修复**: 修正了与SillyTavern API交互的底层逻辑，通过`createLorebookEntry`等专用API确保了数据写入的准确性。
- **v4.0 (UI/UX & 功能完善)**:
    - **UI统一**: 全面改造UI，使其与SillyTavern主流风格保持一致，并解决了插件间的CSS冲突。
    - **功能补全**: 新增了功能强大的“统计分析”面板和独立的“删除世界书/条目”视图。
    - **BUG修复**: 解决了移动端布局、按钮状态反馈、导航逻辑等一系列问题，大幅提升了插件的稳定性。

## 🤝 致谢

感谢在开发过程中提供宝贵反馈和专业知识的用户。您的指导是这个项目能够达到当前专业水平的关键。
